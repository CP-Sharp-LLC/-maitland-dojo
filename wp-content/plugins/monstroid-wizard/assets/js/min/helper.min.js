"use strict";jQuery(document).ready(function(e){function a(e){return'<span class="wizard-spinner '+e+'"><span class="wizard-spinner-circle"></span></span>'}function s(){i.removeClass("error"),e(".wizard-popup-message.error",r).remove();var a=!0;return(null==i.val()||""==i.val())&&(i.addClass("error"),a=!1),a}function n(){var a=e("#start_install_btn");a.after('<span class="spinner install-spinner" style="visibility:visible;"></span>'),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"monstroid_wizard_validate_key",nonce:o.val(),key:i.val()}}).done(function(e){return"object"!=typeof e&&t("Unknown error","error","success","success"),void 0==e.type?(a.next(".spinner").remove(),!1):"error"==e.type?(i.addClass(e.key_class),t(e.message,e.type,e.key_class),a.next(".spinner").remove(),!1):(t(e.message,e.type),void(window.location=monstroid_wizard_steps.select_type))})}function t(e,a,s){return"error"==s?(i.next(".wizard-popup-message").length&&i.next(".wizard-popup-message").remove(),void i.after('<div class="wizard-popup-message '+a+'">'+e+"</div>")):void r.append('<div class="wizard-message '+a+'">'+e+"</div>")}var r=(e("#start_install_btn"),e("#cherry-wizard-premium-install")),i=e('input[name="theme_key"]',r),o=e('input[name="_wpnonce"]',r);i.focus(function(){e(this).hasClass("error")&&e(this).removeClass("error").parent().find(".wizard-popup-message").fadeOut("300")}),e(document).on("click","#start_install_btn",function(e){e.preventDefault(),r.find(".wizard-message").remove();var a=s();return 0==a?!1:void n()}),e(document).on("click",".wizard-theme-item-actions .install",function(s){s.preventDefault();var n=e(this),t=n.data("template");return n.hasClass("in-progress")?!1:(n.addClass("in-progress").prepend(a("spinner-type-primary")),void e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"monstroid_wizard_get_child_link",template_id:t}}).done(function(e){n.removeClass("in-progress"),"success"==e.type&&(window.location=monstroid_wizard_steps.theme_install)}))}),e(document).on("click",".install-monstroid",function(s){var n=e(this),t=monstroid_wizard_steps.theme_install;return s.preventDefault(),n.hasClass("in-progress")?!1:(document.getElementById("wizard-advanced-install").checked&&(t=monstroid_wizard_steps.advanced_install),n.addClass("in-progress").prepend(a("spinner-type-primary")),void e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"monstroid_wizard_start_main_install"}}).done(function(e){n.removeClass("in-progress"),"success"==e.status&&(window.location=t)}))}),e(document).on("click","#start_advanced_install",function(s){var n=e(this),t=monstroid_wizard_steps.theme_install,r=e('input[name="advanced_install_type"]:checked').val();return s.preventDefault(),n.hasClass("in-progress")?!1:(n.addClass("in-progress").prepend(a("spinner-type-primary")),void e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"monstroid_wizard_start_advanced_install",type:r}}).done(function(e){n.removeClass("in-progress"),"success"==e.status&&(window.location=t)}))}),e(document).on("click",".wizard-pager-item-link",function(a){a.preventDefault();var s=e(this),n=e(".themes-list"),t=s.data("page");return s.hasClass("disabled")||s.hasClass("current-page")||s.hasClass("in-progress")?!1:(s.addClass("in-progress"),void e.ajax({url:ajaxurl,type:"post",dataType:"html",data:{action:"monstroid_wizard_get_themes_page",page:t}}).done(function(e){s.removeClass("in-progress"),n.html(e)}))})});