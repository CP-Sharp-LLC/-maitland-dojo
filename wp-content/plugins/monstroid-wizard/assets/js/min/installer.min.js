jQuery(document).ready(function(a){function t(){var r=a(".wizard-installation .wizard-installation_item").last(),s=r.attr("data-is-last-step"),i=r.attr("data-step"),n=a(".wizard-installation").attr("data-install-type");_plugin=r.attr("data-plugin"),a.ajax({url:ajaxurl,type:"get",dataType:"json",data:{action:"monstroid_wizard_install_step",step:i,type:n,plugin:_plugin},error:function(){a("#cherry-wizard-retry-trigger").removeClass("hidden_"),r.parent().addClass("break"),r.addClass("item-error")}}).done(function(n){if(jQuery(document).trigger(e,[i,_plugin,n]),"success"==n.type||"warning"==n.type?(r.addClass("item-"+n.type),r.find(".wizard-installation_item_response").html(n.content),r.parent().append(n.next_step),"no"==s&&t()):(r.addClass("item-error"),r.find(".wizard-installation_item_response").html(n.content),a("#cherry-wizard-retry-trigger").removeClass("hidden_"),r.parent().addClass("break")),r.find(".wizard-installation_item_details").removeClass("hidden_"),n.emergency_break&&"break"==n.emergency_break)return r.parent().addClass("break"),void 0;if("yes"==s){{a(".wizard-installation").attr("data-next-step")}r.after('<div class="submit-wrap_">'+monstroid_wizard_install_data.redirect_message+"</div>"),window.location=monstroid_wizard_steps.content_install}})}function r(){var t=a(".wizard-install-progress"),r=t.find(".wizard-install-progress-group"),s=parseInt(r.length);if(0!=s)var i=100/s;else var i=100;r.css("width",i+"%").attr("data-group-width",i)}function s(a,t){var t=t||0,r=Math.pow(10,t),s=Math.abs(Math.round(a*r)),i=(0>a?"-":"")+String(Math.floor(s/r));if(t>0){var e=String(s%r),n=new Array(Math.max(t-e.length,0)+1).join("0");i+="."+n+e}return i}function i(t,r){return""==r.plugins_progress?0:(0!=r.plugins_count&&a(".wizard-install-progress").find('.wizard-install-progress-group[data-group="frontend_plugins"]').attr("data-group-count",r.plugins_count),r.plugins_progress)}a(document).on("click",".wizard-installation_item_details",function(t){t.preventDefault();var r=a(this).parent().next();r.hasClass("active")?(r.removeClass("active"),a(this).removeClass("active")):(r.addClass("active"),a(this).addClass("active"))});var e=jQuery.Event("monstroid_wizard_step_response");"ok"==monstroid_wizard_install_data.dir_permissions&&"ok"==monstroid_wizard_install_data.server_settings?t():"error"==monstroid_wizard_install_data.dir_permissions&&"error"==monstroid_wizard_install_data.server_settings&&a(".wizard-installation").remove(),a(document).on("click",".wizard-run-install",function(r){r.preventDefault(),a(".wizard-installation").removeClass("manually-allow"),a(".wizard-install-notices").addClass("hidden_"),a(".wizard-install-todo").addClass("hidden_"),t()}),r();var n=0;a(document).on("monstroid_wizard_step_response",function(t,r,e,d){if(t.preventDefault(),0==n&&(n=i(r,d),0!=n&&a(".wizard-install-progress").find('.wizard-install-progress-group[data-group="frontend_plugins"]').html(n)),"install-plugins"==r&&""!=e)var l=a(".wizard-install-progress").find('.wizard-install-progress-step[data-step="'+e+'"]');else var l=a(".wizard-install-progress").find('.wizard-install-progress-step[data-step="'+r+'"]');var o=l.parent(),p=parseInt(o.attr("data-group-count"));(null==p||0==p||void 0==p)&&(p=1);var _=100/p;l.css("width",_+"%").removeClass("empty");var u=a("#theme-install-progress"),g=parseFloat(u.attr("data-progress")),w=parseFloat(o.attr("data-group-width")),c=parseFloat(g+w*_/100);l.length&&(c=s(c,2),u.find("span").html(parseFloat(c)),u.attr("data-progress",c))})});