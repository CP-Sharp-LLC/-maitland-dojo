!function(t){t.fn.circle_thumbnails=function(e){var i=t.extend({thumbnails_selector:">li",position_range:5,size_range:15},e),o=t(window),n=t("body"),s=t(),a=0;this.each(function(){function e(){v.wrap('<div class="thumbnailset-wrapper"></div>'),m=v.parent(".thumbnailset-wrapper"),m.append('<a class="unfolded-items-area" href="#"></a>'),b=t(".unfolded-items-area",m),v.width(z).height(z),m.width(z).height(z),items_state=l(),items_state.forEach(function(t,e){g.eq(e).css({width:t.width,height:t.height,top:t.top,left:t.left,zIndex:k-e+1})})}function c(){_="folded",items_state=l("folded"),v.css({width:z,height:z,top:v.position().top+M,left:v.position().left+T}),items_state.forEach(function(t,e){d(g.eq(e)),g.eq(e).css({top:g.eq(e).position().top-M,left:g.eq(e).position().left-T})}),items_state.forEach(function(t,e){setTimeout(function(){g.eq(e).css({width:t.width,height:t.height,top:t.top,left:t.left}),p(g.eq(e),"outBack",.45)},250*Math.random())}),j=setTimeout(function(){v.appendTo(m).css({position:"relative",top:0,left:0})},500),h()}function r(){_="unfolded",w.addClass("hold-hover"),u(),clearTimeout(j),items_state=l("unfolded");var e=v.offset().top,i=v.offset().left,n=2*q+y;M=parseInt((n-z)/2),T=parseInt((n-z)/2),e-M<15+window.pageYOffset&&(M=M+(e-M)-15-window.pageYOffset),15>i-T&&(T=T+(i-T)-15),i-T+n>o.width()-15&&(T=i+n-o.width()+15),v.appendTo("body").css({position:"absolute",width:n,height:n,top:e-M,left:i-T}),items_state.forEach(function(t,e){d(g.eq(e)),g.eq(e).css({top:g.eq(e).position().top+M,left:g.eq(e).position().left+T})}),items_state.forEach(function(t,e){setTimeout(function(){g.eq(e).css({width:t.width,height:t.height,top:t.top,left:t.left}),p(g.eq(e),"outBack",.5)},250*Math.random())}),v.append('<div class="thumbnails-hover-cover"></div>'),setTimeout(function(){t("> .thumbnails-hover-cover",v).remove()},500)}function l(e){var e=e||"folded",o=[];return g.each(function(n){{var s,a,c,r;t(this)}switch(e){case"folded":q=parseInt(y/3.5),3>n?(s=2*Math.PI/3*n,a=f(Math.cos(s)*q,i.position_range)+q/1.2,c=f(Math.sin(s)*q,i.position_range)+q,r=f(y-i.size_range-10*n,i.size_range)):(a=z/2,c=z/2,r=0);break;case"unfolded":q=k*(y/8),y>q&&(q=y),s=2*Math.PI/k*n,a=Math.cos(s)*q+q,c=Math.sin(s)*q+q,r=y}o.push({left:a+"px",top:c+"px",width:r,height:r})}),o}function u(){0==s.length?(n.append('<div class="thumbnailset-cover"><div/>'),s=t(".thumbnailset-cover",n),s.css({opacity:0}),p(t(".thumbnailset-cover",n),"ease",.15),setTimeout(function(){s.css({opacity:1})},5)):(clearTimeout(a),s.css({opacity:1}))}function h(){s.length>=1&&(s=t(".thumbnailset-cover",n),s.css({opacity:0}),a=setTimeout(function(){w.removeClass("hold-hover"),s.remove(),s=t()},500))}function f(t,e){return Math.random()*(t+e-(t-e)+1)+(t-e)}function p(t,e,i){var e=e||"ease",i=i||.5;switch(e){case"ease":t.css({"-webkit-transition":"all "+i+"s ease",transition:"all "+i+"s ease"});break;case"outSine":t.css({"-webkit-transition":"all "+i+"s cubic-bezier(0.470, 0.000, 0.745, 0.715)",transition:"all "+i+"s cubic-bezier(0.470, 0.000, 0.745, 0.715)"});break;case"outCubic":t.css({"-webkit-transition":"all "+i+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)",transition:"all "+i+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"});break;case"outExpo":t.css({"-webkit-transition":"all "+i+"s cubic-bezier(0.190, 1.000, 0.220, 1.000)",transition:"all "+i+"s cubic-bezier(0.190, 1.000, 0.220, 1.000)"});break;case"outBack":t.css({"-webkit-transition":"all "+i+"s cubic-bezier(0.175, 0.885, 0.320, 1.275)",transition:"all "+i+"s cubic-bezier(0.175, 0.885, 0.320, 1.275)"})}}function d(t){t.css({"-webkit-transition":"none",transition:"none"})}var m,b,w=t(this),v=t(".thumbnailset",w),g=t(i.thumbnails_selector,v),_="folded",k=g.length,y=g.width(),q=parseInt(y/3.5),z=2*q+y+i.position_range,T=0,M=0,j=0;e(),b.click(function(){return"folded"==_&&r(),!1}),v.mouseleave(function(){"unfolded"==_&&c()})})}}(jQuery),jQuery(document).ready(function(){jQuery(".portfolio-wrap").on("ajax_success",function(){function t(){i.each(function(t,e){var i=jQuery(e).find(".inner-wrap"),o=i.find(".item-content-holder");o.css({marginTop:0}),o.length>0&&setTimeout(function(){var t=i.outerHeight(),e=o.outerHeight(),n=o.position().top;n+e>t&&o.css({marginTop:-(n+e-t)})},750)})}var e=jQuery(".portfolio-wrap .portfolio-item .thumbnailset");if(e.length>0){var i=jQuery(".portfolio-wrap .portfolio-item");i.circle_thumbnails(),jQuery(window).resize(t),t()}})});